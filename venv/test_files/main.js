/*! For license information please see main.js.LICENSE */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=149)}({13:function(e,t,n){var r,o;!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,c=window.Cookies=i();c.noConflict=function(){return window.Cookies=a,c}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,o,i){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},r.defaults,i)).expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*i.expires),i.expires=c}i.expires=i.expires?i.expires.toUTCString():"";try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(e){}o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,!0!==i[u]&&(s+="="+i[u]));return document.cookie=t+"="+o+s}t||(a={});for(var d=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,p=0;p<d.length;p++){var f=d[p].split("="),h=f.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var y=f[0].replace(l,decodeURIComponent);if(h=n.read?n.read(h,y):n(h,y)||h.replace(l,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===y){a=h;break}t||(a[y]=h)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}(function(){})})},149:function(e,t,n){e.exports=n(377)},377:function(e,t,n){"use strict";n.r(t);var r,o,i=n(40),a=n.n(i),c=n(83),s=n(13),u="cartInfo",d=":",l=",",p="comparison",f=(new RegExp("[0-9]"),";"),h="shoppingList",y="/",m="user-auth";function v(e){var t=s.get(e);return"string"==typeof t&&""!==t?t.split(l):[]}function g(e,t){return document.body.addEventListener(e,t),()=>document.body.removeEventListener(e,t)}function b(e){return e||{dataset:{}}}b(document.querySelector("#checkout-path-catalog")).dataset.value,b(document.querySelector("#checkout-path-preparation")).dataset.value,b(document.querySelector("#policyPersData")).dataset.value,b(document.querySelector("#personalDataDocs")).dataset.value,b(document.querySelector("#basketRegulations")).dataset.value;var w=b(document.querySelector(".config")||document.querySelector("body")),O=(null===(r=w.dataset)||void 0===r||r.shoppingListAjaxHref,null===(o=w.dataset)||void 0===o||o.recaptchaSiteKey,w&&w.dataset.home&&w.dataset.home,w&&w.dataset.hintTimer&&w.dataset.hintTimer,w&&w.dataset.productTimer&&w.dataset.productTimer,w&&w.dataset.searchHref&&w.dataset.searchHref,w.dataset.cookieKeepingPeriod||"30"),S=b(document.querySelector("#api-settings")),{apiorchestratorScheme:j=w.dataset.apiorchestratorScheme,apiorchestratorDomain:P=w.dataset.apiorchestratorDomain,apiorchestratorApikey:k=w.dataset.apiorchestratorApikey,subscriptionPath:I=w.dataset.subscriptionPath,enterpriseYmapsLink:D=w.dataset.enterpriseYmapsLink,ymapsLink:E=w.dataset.ymapsLink,ymapsApiKey:q=w.dataset.test,bwsUrlContext:x=w.dataset.bwsUrlContext,defaultStoreId:C=w.dataset.defaultStoreId,regionId:T=w.dataset.regionId,emailRegexp:L=w.dataset.emailRegexp,newCheckout:W=!1,showCheckoutWarning:_=!1,checkoutWarningText:U="",groupWarningText:A=""}=S.dataset,{action:R}=b(document.querySelector(".shop-list-synchronization")).dataset;function M(){var{hostname:e}=window.location,t=e.indexOf("."),n="";if(!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(e)&&-1!==t){var r=e.split(".");n=e.split(".").slice(r.length-2).join(".")}return n}var B=n(13);function H(){var e=B.get(m);return e&&0!==e.length}document.addEventListener("lk:auth:logout",e=>{var{detail:t}=e;B.get(m)&&(B.remove(m),function(e){var t=document.createElement("iframe");t.setAttribute("src",e),t.style.display="none",document.querySelector("body").appendChild(t),t.onload=function(){window.location="/content/elbrus/master/ru",window.location.reload()}}(t.logoutUrl),fetch(t.logoutResource,{method:"POST"})),document.dispatchEvent(new CustomEvent("lk:auth:changed",{detail:H()}))});var N=n(13),J=n.n(N);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var K=e=>new Promise(function(t,n){var r,o,i,a,c;if(r="".concat(j,"://").concat(P).concat(x,"/pushList/"),o=e.map(e=>({id:e.code,quantity:+e.quantity})),i={list:{id:"",type:"BASKET",storeId:C,products:o}},(a=new Headers).append("x-api-key",k),a.append("Content-Type","application/json"),c={method:"POST",headers:a,body:JSON.stringify(i),credentials:"include"},H())return Promise.resolve((()=>new Promise(function(e,t){var n;return n={method:"GET",credentials:"include"},Promise.resolve(fetch("/bin/account/checkAuthToken",n)).then(function(n){try{return e()}catch(e){return t(e)}},t)}))()).then(function(e){try{return s.call(this)}catch(e){return n(e)}}.bind(this),n);function s(){return H()&&fetch(r,c).then(e=>console.log(e)).catch(e=>console.log(e)),t()}return s.call(this)});var G=Object(c.debounce)(function(e,t){document.body.dispatchEvent(new CustomEvent("basket:update",{detail:e})),H()&&t&&K(e)},200);function Y(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length>0?parseInt(O,10):0;J.a.set(u,function(e){return e.map(e=>"".concat(e.code).concat(d).concat(e.quantity)).join(f)}(e),{path:y,expires:n,domain:M()}),G(e,t)}function z(){var e=J.a.get(u);return"string"==typeof e&&""!==e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return e.split(t).map(e=>{var[t,n]=e.split(d);return{code:t,quantity:parseFloat(n)}})}(e):[]}function Z(e){var t=z();return[t.find(t=>t.code===e)||{code:e,quantity:0},t.filter(t=>t.code!==e)]}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[n,r]=Z(e);n.quantity=+n.quantity+t,Y([...r,n])}function Q(e){Y(z().filter(t=>t.code!==e))}function V(){Y([])}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}g("basket:add",e=>$(e.detail.id,e.detail.quantity)),g("basket:remove",e=>(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[n,r]=Z(e);if(n.quantity>=1){var o=+n.quantity-t;n.quantity=o<1?1:o,Y([n,...r])}else Y([...r])})(e.detail.id,e.detail.quantity)),g("basket:change",e=>(function(e,t){var n=z(),r=n.find(t=>t.code===e);r?(r.quantity=t,Y(n)):$(e,t)})(e.detail.id,e.detail.quantity)),g("basket:set",e=>(function(e){V(),Y(e)})(e.detail.products)),g("basket:delete:elements",e=>(function(e){e.map(e=>Q(e.id))})(e.detail.products)),g("basket:delete:element",e=>Q(e.detail.id)),g("basket:delete:all",V),window.layers=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},window.layers,{basket:{getBasket:z}});var ee=n(13);function te(e){return new CustomEvent("comparisonUpdate",{detail:e,bubbles:!0,composed:!0})}function ne(e){var t=e.length>0?parseInt(O,10):0;ee.set(p,e.join(l),{path:y,expires:t,domain:M()})}function re(){return v(p)}document.body.addEventListener("comparisonAddItem",e=>{!function(e){var t=[e,...v(p)];ne(t),document.body.dispatchEvent(te(t))}(e.detail.productId)}),document.body.addEventListener("comparisonRemoveItem",e=>{!function(e){var t=v(p).filter(t=>t!==e);ne(t),document.body.dispatchEvent(te(t))}(e.detail.productId)}),window.layers=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},window.layers,{compare:{getCompareItems:re}});var oe="checkout:invalidate";document.addEventListener(oe,()=>{J.a.remove("transactionId"),J.a.remove("selectedDeliveryMode"),J.a.remove("selectedPaymentType"),localStorage.removeItem("basketProductsGTM"),localStorage.removeItem("checkoutSessionCart"),localStorage.removeItem("groupType"),localStorage.removeItem("deliveryType")});var ie="region:update";var ae=new class{constructor(e,t){a()(this,"_regionID",null),this.regionCookie=e,document.addEventListener(ie,()=>{J.a.set(e,this._regionID,{expires:t,domain:M()})})}get regionID(){return this._regionID||(this.regionID=J.a.get(this.regionCookie)),this._regionID}set regionID(e){e&&(this._regionID=e,document.dispatchEvent(new CustomEvent(ie,{detail:this._regionID})),document.dispatchEvent(new CustomEvent(oe)))}}("_regionID",365);g("region:set",e=>{var{detail:t}=e;ae.regionID=t});class ce{getWishlist(){return Promise.reject(new Error("Not implemented"))}updateWishlist(e){return new Promise(function(t,n){var r=new Request(R,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:JSON.stringify(e)});return t(fetch(r))})}}class se{getWishlist(){return new Promise((e,t)=>{try{e(this.getWishlistSync())}catch(e){t(e)}})}getWishlistSync(){var e=J.a.get(h);return"string"==typeof e&&e.length>0?function(e){return e.split(f).filter(e=>!!e).map(e=>{var[t,n]=e.split(d);return{code:t,quantity:n}})}(e):[]}updateWishlist(e){return new Promise((t,n)=>{try{var r=e.length>0?parseInt(O,10):0;J.a.set(h,function(e){return e.map(e=>"".concat(e.code).concat(d).concat(e.quantity)).join(f)}(e),{path:y,expires:r,domain:M()}),t()}catch(e){n(e)}})}}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var de="wishlist:add",le="wishlist:delete:element",pe={WISHLIST_UPDATE:"wishlist:update"};function fe(){return(new se).getWishlistSync()}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[n,r]=ve(e);n.quantity=+n.quantity+t,me([...r,n])}var ye=Object(c.debounce)(function(e,t){var n,r,o;n=pe.WISHLIST_UPDATE,r=e,document.body.dispatchEvent(new CustomEvent(n,{detail:r})),H()&&t&&(o=e,(new ce).updateWishlist(o))},200);function me(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(new se).updateWishlist(e).then(()=>ye(e,t))}function ve(e){var t=fe();return[t.find(t=>t.code===e)||{code:e,quantity:0},t.filter(t=>t.code!==e)]}H()&&(new ce).getWishlist().then(e=>e.json()).then(e=>me(e.list.products,!1)).catch(e=>console.log(e)),g(de,e=>he(e.detail.id,e.detail.quantity)),g(le,e=>(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[n,r]=ve(e),o=n?n.quantity-t:0;o>0?(n.quantity=o,me([n,...r])):me([...r])})(e.detail.id,e.detail.quantity)),window.layers=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},window.layers,{shoppingList:{getShoppingList:fe}})},40:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},83:function(e,t){function n(e,t,n){var r,o,i,a,c;function s(){var u=Date.now()-a;u<t&&u>=0?r=setTimeout(s,t-u):(r=null,n||(c=e.apply(i,o),i=o=null))}null==t&&(t=100);var u=function(){i=this,o=arguments,a=Date.now();var u=n&&!r;return r||(r=setTimeout(s,t)),u&&(c=e.apply(i,o),i=o=null),c};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(c=e.apply(i,o),i=o=null,clearTimeout(r),r=null)},u}n.debounce=n,e.exports=n}});
//# sourceMappingURL=main.js.map